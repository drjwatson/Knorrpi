<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knorr PI</title>
</head>
<body>
    <div id="staffList">
    </div>
</body>

<script>

// Define your JSON array with initial data
let data = [
    { name: "Aaron", count: 0 },
    { name: "Joel", count: 0 },
    { name: "Joe", count: 0 },
    { name: "Joey", count: 0 },
    { name: "Josh", count: 0 },
    { name: "Madeleine", count: 0 },
    { name: "Ed", count: 0 }
];

// Function to fetch the data
async function fetchData() {
    try {
        const response = await fetch('knorrpi.json');
        data = await response.json();
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}

// Function to increment count by name
function incrementCountByName(name) {
    console.log(data);
    const item = data.find(item => item.name === name);
    if (item) {
        item.count++;
        saveData();
    } else {
        console.error('Item not found:', name);
    }
}

async function saveData() {
    try {
        await fetch('knorrpi.json', {
            method: 'POST', // or 'POST' if needed
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
    } catch (error) {
        console.error('Error saving data:', error);
    }
}


function createStaffItems() {
    const staffList = document.getElementById('staffList');

    staffList.innerHTML = '';
    data.forEach(item => {
        const listItem = document.createElement('div');

        const nameElement = document.createElement('span');
        nameElement.textContent = item.name;
        listItem.appendChild(nameElement);

        const countElement = document.createElement('span');
        countElement.textContent = item.count;
        listItem.appendChild(countElement);

        const incrementButton = document.createElement('button');
        incrementButton.textContent = 'Increment';
        incrementButton.addEventListener('click', () => {
            incrementCountByName(item.name);
            createStaffItems();
        });
        listItem.appendChild(incrementButton);

        const decreaseButton = document.createElement('button');
        decreaseButton.textContent = 'Decrease';
        decreaseButton.addEventListener('click', () => {
            item.count--;
            saveData();
            createStaffItems();
        });
        listItem.appendChild(decreaseButton);

        staffList.appendChild(listItem);
    });

}

fetchData();
createStaffItems();

</script>
</html>